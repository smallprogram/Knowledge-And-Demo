# 组件简介
**组件控制**屏幕上被称为**视图的一小片区域**。比如：

- 带有导航链接的应用根组件。

- 英雄列表。

- 英雄编辑器


在**类中定义组件的应用逻辑**，为视图提供支持。 组件通过一些由**属性和方法**组成的 API **与视图交互**。  

比如，**HeroListComponent** 中有一个 名为**heroes的属性**，它**储存着一个数组**的**英雄数据**。 HeroListComponent 还有一个 **selectHero() 方法**，当用户从列表中选择一个英雄时，它会**设置 selectedHero 属性的值**。 该组件会**从服务获取英雄列表**，它是一个 TypeScript 的**构造器参数型属性**。本服务通过**依赖注入系统提供给该组件**。  

```ts
export class HeroListComponent implements OnInit {
  heroes: Hero[];
  selectedHero: Hero;

  constructor(private service: HeroService) { }

  ngOnInit() {
    this.heroes = this.service.getHeroes();
  }

  selectHero(hero: Hero) { this.selectedHero = hero; }
}
```

应用可以通过一些可选的**生命周期钩子（比如ngOnInit()）来在每个特定的时机采取行动**。  

## 组件元数据 
![image](images/01.03-架构-组件简介/metadata.png)
**@Component 装饰器**会指出紧随其后的那个类是个组件类，并为其指定元数据。

一个类，**加上了 @Component 装饰器，它才变成了组件**。  


组件的元数据告诉 Angular 到哪里获取它需要的主要构造块，以创建和展示这个组件及其视图。   

组件的元数据把一个**模板**（无论是直接内联在代码中还是引用的外部文件）和该**组件**关联起来。 该**组件及其模板，共同描述了一个视图**。

@Component 的元数据还会配置要**如何在 HTML 中引用该组件**，以及**该组件需要哪些服务**等等。  

```ts
@Component({
  selector:    'app-hero-list',
  templateUrl: './hero-list.component.html',
  styleUrls: ['./hero-list.component.scss']
  providers:  [ HeroService ]
})
export class HeroListComponent implements OnInit {
/* . . . */
}
```

- **selector**：是一个 **CSS 选择器**，它会告诉 Angular，一旦在模板 HTML 中找到了这个选择器**对应的标签**，就**创建并插入该组件的一个实例**。 比如，如果应用的 HTML 中包含 <app-hero-list></app-hero-list>，Angular 就会在这些标签中插入一个 HeroListComponent 实例的视图。  

- **templateUrl**：该**组件的 HTML 模板文件相对于这个组件文件的地址**。 另外，你**还可以用 template 属性的值来提供内联的 HTML 模板**。 这个模板定义了该组件的宿主视图。  

- **styleUrls**: 该**组件的HTML模板文件所对应的样式表文件的一个数据**。该样式表数组仅适用于该组件，不会影响其他组件的样式。  

- **providers**：当前**组件所需的服务提供商的一个数组**。在这个例子中，它告诉 Angular 该如何提供一个 HeroService 实例，以获取要显示的英雄列表。

## 模板与视图
![image](images/01.03-架构-组件简介/template.png)
你要通过组件的配套**模板来定义其视图**。**模板就是一种 HTML**，它会告诉 Angular 如何渲染该组件。  

**视图**通常会分层次进行组织，让你能**以 UI 分区或页面为单位进行修改、显示或隐藏**。

与**组件直接关联的模板**会定义该组件的**宿主视图**。该组件还可以定义一个**带层次结构的视图**，它**包含一些内嵌的视图作为其它组件的宿主**。  

![image](images/01.03-架构-组件简介/component-tree.png)

**带层次结构的视图**可以**包含同一模块（NgModule）中组件的视图**，**也可以（而且经常会）包含其它模块中定义的组件的视图**。  

## 模板语法
 你的模板可以使用**数据绑定**来协调应用和 DOM 中的数据，  
 使用**管道**在显示出来之前对其进行转换，  
 使用**指令**来把程序逻辑应用到要显示的内容上。  

```ts
h2>Hero List</h2>

<p><i>Pick a hero from the list</i></p>
<ul>
  <li *ngFor="let hero of heroes" (click)="selectHero(hero)">
    {{hero.name}}
  </li>
</ul>

<app-hero-detail *ngIf="selectedHero" [hero]="selectedHero"></app-hero-detail>
```

**`*ngFor，{{hero.name}}，click、[hero] 和 <app-hero-detail>`**。这些模板语法元素告诉 Angular 该如何根据程序逻辑和数据在屏幕上渲染 HTML。  
