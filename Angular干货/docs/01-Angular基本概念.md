# [返回主目录](Readme.md)

# 目录 <!-- omit in toc --> 

- [返回主目录](#%e8%bf%94%e5%9b%9e%e4%b8%bb%e7%9b%ae%e5%bd%95)
  - [架构概览](#%e6%9e%b6%e6%9e%84%e6%a6%82%e8%a7%88)
  - [模块 NgModule](#%e6%a8%a1%e5%9d%97-ngmodule)
  - [组件](#%e7%bb%84%e4%bb%b6)
  - [模板、指令和数据绑定](#%e6%a8%a1%e6%9d%bf%e6%8c%87%e4%bb%a4%e5%92%8c%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a)
  - [服务与依赖注入](#%e6%9c%8d%e5%8a%a1%e4%b8%8e%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5)
  - [路由](#%e8%b7%af%e7%94%b1)

## 架构概览

Angular 是一个用 HTML 和 TypeScript 构建客户端应用的平台与框架。

以下是一些概念：

- **NgModule**,又叫模块，Angular 的基本构造块是 NgModule，Angular 一定会有一个引导根模块，也可能会有一些特性模块。
- **组件**，一种定义视图的类，每个Angular都会有一个根组件。
- **模板**，一组带有指令的HTML文档，通常和组件一起定义视图。
- **指令**，能够实现某种逻辑的代码，通常使用再模板中与组件交互。其中包含事件绑定与属性绑定。
- **管道**，可以在DOM渲染阶段处理数据的显示方式。
- **视图**，组件和模板定义了视图。
- **服务**，提供一些与视图不直接相关的功能，通过依赖被注入到组件中，让代码更加模块化，实现可复用。
- **装饰器**，使用元数据修饰各种类，进而告诉Angular这个类是组件还是服务还是指令等。
- **路由**,Angular提供的Router模块的服务，可以设定规则或根据数据状态拦截URL或放行URL实现导航等目的。


## 模块 NgModule

NgModule 为一个组件集声明了编译的上下文环境，它专注于某个应用领域、某个工作流或一组紧密相关的能力。

NgModule 也可以从其它 NgModule 中导入功能，并允许导出它们自己的功能供其它 NgModule 使用。

写一些特性模块，可以让管理复杂应用实现可复用性设计。 还能获得惰性加载（也就是按需加载模块）的优点。

每个NgModule会包含一个@NgModule()装饰器。其元数据如下：
- **declarations**(可声明对象)。其中包含了属于这个NgModule的组件、指令、管道类的名称。
- **exports**(导出表)。需要导出到其他NgModule的组件、指令、管道等。一般只在特性模块中存在。
- **providers**（提供商）。在模块级别中声明的服务提供商。也可以在组件级别声明提供商。
- **bootstrap**（引导）。应用的主视图。或者叫跟组件也可以。一般只存在于跟组件。


## 组件

组件会把组件树和页面中的DOM链接起来。实现一些应用的数据和逻辑，每个组件都会关联一个HTML模板。并使用@Component()装饰器表明他是一个组件类，并在元数据中体现一个与这个组件相关的HTML模板，CSS样式等。

组件通过@Component()装饰器进行装饰。其元数据如下：

- **selector**（选择器）。其值为一个字符串，如果HTML模板中包含这个字符串的元素。Angular就会将这个组件的实例的视图插入到模板中。
- **templateUrl**（关联模板）。定义该组件的HTML模板。可以使用带有HTML元素的字符串作为值，也可以使用HTML模板文件的路径作为值。
- **providers**（提供商）。该组件级别的服务提供商声明。

组件只关心与视图有关的功能，只管用户体验。组件可以互相嵌套。

## 模板、指令和数据绑定

模板包含HTML和Angular指令。指令会修改HTML中的数据。指令中包含两种数据绑定方式，分为事件绑定和属性绑定。事件绑定用于处理用户的输入。属性绑定会将处理后的数据插入到HTML中。


## 服务与依赖注入

服务类一般用于跨组件共享数据与逻辑。例如HTTP请求等等。通常带有@Injectable()装饰器。该装饰器的元数据可以让服务为依赖注入到组件中使用。

服务是一个广义的概念，它包括应用所需的任何值、函数或特性。狭义的服务是一个明确定义了用途的类。它应该做一些具体的事，并做好。

服务一般负责从服务器获取数据、验证用户输入或向控制台输出日志等工作。通过依赖注入到各个组件中实现各种功能。

需要用服务时，可以通过两种方式注册服务
- 在需要用到服务的组件或模块中，将该服务注册到元数据的provider中。
- 在服务的@injectable()装饰器中将自己注册到全局。使自己处处可用。
    ```ts
    @Injectable({
    providedIn: 'root',
    })
    ```

## 路由

Angular的Router模块的服务，可以定义在应用不同状态的和视图层次结构之间的导航要使用的路径。例如

- 在地址栏输入URL会导航到相应页面。
- 点击某个链接导航到某个页面
- 点击浏览器前进后退按钮，会根据浏览历史进行向前或向后的导航。